{{ define "title" }} | Contact{{ end }}
{{ define "body" }}

<div class="container-fluid" id="page-content">

  {{ partial "panels/blueheadline.html" .Site.Data.config.headline.contact }}


      <section class="lightblue">
        <div class="container">
            <div class="row">
                <div class="col-sm-12">
                    <div style="margin: 0 auto; max-width: 600px;">
                        <script src='https://jetstacksales.freshsales.io/web_forms/0653dacfd6392c6b8d0f62ae3b5c269f56ce1790b315f949ca82b38bc864c510/form.js' crossorigin='anonymous' id='fs_0653dacfd6392c6b8d0f62ae3b5c269f56ce1790b315f949ca82b38bc864c510'></script>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="white center tight" id="locations">
        <div class="container">
            <h2>Our Offices</h2>

            <div class="offices">
            {{ range $index, $office := .Site.Data.config.offices }}
                <address class="offices__office">
                <u>{{ $office.name }}</u><br />
                {{ range $office.address }}{{ . }}<br />{{ end }}
                </address>
            {{ end }}
            </div>

            <hr />

            <h2>Getting There</h2>

            <p class="locations">
                {{ range $index, $office := .Site.Data.config.offices }}
                    <a href="javascript:void(0)" onclick="focusMap('{{ $office.name }}')" class="text-light-alt" id="{{ $office.name }}">{{ $office.name }}</a>
                {{ end }}
            </p>
        </div>
    </section>
    <section class="white tight" id="map">
    </section>

</div>

{{ end }}

{{ define "cta"}}
    <!-- No CTA needed on contact page -->
{{ end }}

{{ define "scripts" }}
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key={{ .Site.Data.config.apikeys.maps }}"></script>
{{ $jsFiles := slice }}
{{ $jsFiles = $jsFiles | append (resources.Get "js/contactform.js") }}
{{ $jsFiles = $jsFiles | append (resources.Get "js/map.js") }}
{{ $js := $jsFiles | resources.Concat "js/contact.js" }}
{{ if isset $.Site.Params "minify" }}
  {{ $js = $js | resources.Minify }}
{{ end }}
{{ $js = $js | resources.Fingerprint }}
<script type="text/javascript" src="{{ $js.RelPermalink }}" integrity="{{ $js.Data.Integrity }}"></script>
<script type="text/javascript">
    // loop over each office entry in config.yaml and feed it to the js script
    // addOfficeLocation is defined in /js/map.js
    {{ range $index, $office := .Site.Data.config.offices }}
        addOfficeLocation(JSON.parse({{ dict "name" $office.name "lat" $office.lat "lon" $office.lon "address" $office.address "default" $office.default | jsonify }}))
    {{ end }}
</script>
{{ end }}
